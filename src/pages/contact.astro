---
// src/pages/contact.astro
import Base from "../layouts/Base.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";

const WHATSAPP_PHONE = import.meta.env.PUBLIC_WAPP || "18096172105";
const texto = "Hola, quiero una cotización para control de plagas.";
const wa = `https://wa.me/${WHATSAPP_PHONE}?text=${encodeURIComponent(texto)}`;
---
<Base title="Contacto — Ecoquimia" description="Ponte en contacto con nosotros.">
  <Header slot="header" />

  <section class="container-max py-16" aria-labelledby="contacto-title">
    <div class="rounded-3xl border border-white/10 bg-zinc-900/60 p-8 text-white">
      <div class="text-center mb-8 md:mb-10">
        <h1 id="contacto-title" class="text-3xl font-semibold">Contacto</h1>
        <p class="mt-3 text-white/80">
          Escríbenos por WhatsApp o completa el formulario y te respondemos en breve.
        </p>
      </div>

      <div class="mt-6 grid gap-10 md:grid-cols-2">
        <!-- CTA / datos -->
        <div>
          <ul class="space-y-2 text-white/80">
            <li>Email: <a class="underline hover:text-white" href="mailto:contacto@ecoquimia.com">contacto@ecoquimia.com</a></li>
            <li>Teléfono: <a class="underline hover:text-white" href="tel:+18096172105">+1&nbsp;(809)&nbsp;617&#8209;2105</a></li>
            <li>Ubicación: Santo Domingo, RD</li>
          </ul>

          <div class="mt-6 flex flex-wrap gap-3">
            <a href={wa} target="_blank" rel="noopener noreferrer" class="btn btn-primary">Abrir WhatsApp</a>
            <a href="/services" class="btn btn-outline" data-astro-prefetch>Ver servicios</a>
          </div>
        </div>

        <!-- Formulario -->
        <div>
          <form
            method="post"
            action="/api/contact"
            class="grid gap-4"
            aria-labelledby="form-legend"
            novalidate
          >
            <fieldset class="grid gap-4">
              <legend id="form-legend" class="sr-only">Formulario de contacto</legend>

              <!-- Honeypot anti-bots -->
              <div class="hidden" aria-hidden="true">
                <label for="company">No llenar</label>
                <input id="company" name="company" type="text" tabindex="-1" autocomplete="organization" />
              </div>

              <div>
                <label for="name" class="block text-sm text-white/80 mb-1">Nombre completo</label>
                <input
                  id="name" name="name" type="text" autocomplete="name" required
                  class="w-full rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-emerald-500"
                  placeholder="Tu nombre"
                />
              </div>

              <div class="grid gap-4 md:grid-cols-2">
                <div>
                  <label for="email" class="block text-sm text-white/80 mb-1">Correo</label>
                  <input
                    id="email" name="email" type="email" autocomplete="email" required
                    class="w-full rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-emerald-500"
                    placeholder="correo@dominio.com"
                  />
                </div>
                <div>
                  <label for="phone" class="block text-sm text-white/80 mb-1">Teléfono</label>
                  <input
                    id="phone" name="phone" type="tel" autocomplete="tel"
                    class="w-full rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-emerald-500"
                    placeholder="+1 (809) ..."
                  />
                </div>
              </div>

              <div>
                <label for="subject" class="block text-sm text-white/80 mb-1">Asunto</label>
                <input
                  id="subject" name="subject" type="text"
                  class="w-full rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-emerald-500"
                  placeholder="¿Sobre qué te ayudamos?"
                />
              </div>

              <div>
                <label for="message" class="block text-sm text-white/80 mb-1">Mensaje</label>
                <textarea
                  id="message" name="message" rows={5} required
                  class="w-full rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-emerald-500"
                  placeholder="Cuéntanos tu caso"
                ></textarea>
              </div>

              <button type="submit" class="btn btn-primary">Enviar</button>
            </fieldset>
          </form>
        </div>
      </div>
    </div>
  </section>

  <Footer slot="footer" />
</Base>
