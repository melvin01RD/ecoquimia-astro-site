---
import Base from "../layouts/Base.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import { services } from "../data/services"; // Importamos la data con imágenes
import ServiceCard from "../components/ServiceCard.astro";
import { config } from "../config";

export const prerender = true;

// JSON-LD SEO
const listJsonLd = {
  "@context": "https://schema.org",
  "@type": "ItemList",
  name: "Servicios de control de plagas",
  itemListElement: services.map((s, i) => ({
    "@type": "ListItem",
    position: i + 1,
    item: {
      "@type": "Service",
      name: s.title,
      description: s.description,
      image: s.imgSrc 
    },
  })),
};

const whatsappHref = `https://wa.me/${config.contact.phone}?text=${encodeURIComponent(config.contact.whatsappText)}`;
---

<Base title="Servicios — Ecoquimia" description="Planes residenciales y comerciales de control de plagas.">
  <Header slot="header" />

  <main>
    <section class="container-max py-12 sm:py-16" aria-labelledby="services-title">
      <div class="text-center max-w-3xl mx-auto">
        <h1 id="services-title" class="text-3xl md:text-4xl font-extrabold tracking-tight">
          Nuestros servicios
        </h1>
        <div class="mx-auto mt-3 h-1.5 w-24 rounded-full bg-emerald-600"></div>
        <p class="mt-3 text-zinc-600">
          Tratamientos efectivos y seguros, con seguimiento y garantía.
        </p>
      </div>

      <div class="mt-10 grid gap-5 sm:gap-6 sm:grid-cols-2 lg:grid-cols-3">
        {services.map((s) => <ServiceCard service={s} />)}
      </div>

      <div class="mt-10 text-center">
        <a
          href={whatsappHref}
          target="_blank"
          rel="noopener noreferrer"
          class="btn btn-primary rounded-full"
          aria-label="Solicitar cotización por WhatsApp"
        >
          Solicitar cotización
        </a>
      </div>
    </section>
  </main>

  <Footer slot="footer" />
</Base>
